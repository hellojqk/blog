# Envoy学习笔记

Envoy是专为大型现代服务导向架构设计的网关代理和通信总线。CNCF毕业项目。

## 特性

Envoy是一个可独立运行的进程，旨在与每个应用程序服务器一起运行。所有的Envoy都构成一个透明的通信网格，每个应用程序在其中都与localhost之间发送和接收消息，并且不知道网络拓扑。与传统的库服务到服务通信方法相比，进程外架构具有两个实质性的好处：

- Envoy可与任何应用程序语言一起使用。单个Envoy部署可以在Java，C ++，Go，PHP，Python等之间形成网格。面向服务的体系结构使用多种应用程序框架和语言正变得越来越普遍。特使透明地弥合了差距。
- 任何使用大型面向服务的体系结构的人都知道，部署库（依代码库方式集成到项目的方式）升级可能会非常痛苦。Envoy可以透明地在整个基础架构中快速部署和升级。
、

### 架构概述

- Listeners
  - 侦听器过滤器
  - 网络（L3 / L4）过滤器
  - TCP代理
  - UDP代理
  - DNS过滤器
- HTTP
  - HTTP连接管理
  - HTTP过滤器
  - HTTP路由
  - HTTP升级
  - HTTP动态转发代理
- Upstream clusters 上游集群
  - 集群管理员
  - 服务发现
  - 健康检查
  - 连接池
  - 负载均衡
  - 聚集集群
  - 离群值检测
  - 断路
  - 上游网络过滤器
  - 负荷报告服务（LRS）
- Observability 可观察性
  - 统计
  - 访问日志
  - 追踪
- Security 安全
  - 威胁模型
  - Google漏洞奖励计划（VRP）
  - TLS
  - JSON Web令牌（JWT）身份验证
  - 外部授权
  - 基于角色的访问控制
- Operations & configuration 操作与配置
  - xDS配置API概述
  - 初始化
  - 排水
  - 运行时配置
  - 热重启
  - 过载管理器
- 其他特性
  - 本地限速
  - 全局速率限制
  - 脚本编写
  - IP透明性
- 其他协议
  - gRPC
  - MongoDB
  - DynamoDB
  - Redis
  - Postgres
- 高级
  - 在过滤器之间共享数据

### 设计目标

尽管Envoy绝不慢（我们花了很多时间优化某些快速路径），但是代码还是模块化的，易于测试，而不是追求最大的绝对值。性能。我们认为，这是一种更有效的时间利用方式，因为典型的部署将与语言和运行时同时出现，速度降低许多倍，而内存使用却增加许多倍。
